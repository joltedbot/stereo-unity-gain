import { ComboBox, Button, GridBox, Switch } from "std-widgets.slint";
import { Theme } from "../ui/theme.slint";


export component Label inherits Text {
    in-out property <string> label;
    text: label;
    font-size: Theme.label-size;
    font-weight: Theme.text-weight-bold;
    color: Theme.text-color;
}

export component LevelBox inherits Rectangle {
    in property <string> value;
    border-width: Theme.border-width;
    border-radius: Theme.border-radius;
    border-color: Theme.text-color;
    background: Theme.level-box-background;
    width: 350px;
    height: 200px;

    Text {
        text: value;
        horizontal-alignment: center;
        vertical-alignment: center;
        font-size: Theme.levelbox-label-size;
        font-weight: Theme.text-weight-bold;
        color: Theme.text-color;
    }
}

export component DeviceSelector inherits Rectangle {
    in-out property <[string]> device_list;
    in-out property <string> current;
    callback selected_device(string);

    HorizontalLayout {
        spacing: 10px;

        selector := ComboBox {
            min-width: 275px;
            model: device_list;
            height: Theme.combobox-height;
            current-value: current;
            y: (parent.height / 2) - (self.height / 2);

            selected(value) => {
                root.selected_device(value);
            }
        }
    }
}

export component ChannelSelector inherits Rectangle {
    in-out property <[string]> channel_list;
    in-out property <string> current;
    in property <int> current-index;
    callback selected_channel(string);

    HorizontalLayout {
        spacing: 10px;
        selector := ComboBox {
            y: (parent.height / 2) - (self.height / 2);
            model: channel_list;
            current-value: current;
            height: Theme.combobox-height;
            width: 100px;
            selected(value) => {
                root.selected_channel(value);
            }
        }
    }
}

export component Line inherits Rectangle {
    in property <length> length;
    background: Theme.text-color;
    width: 100%;
    height: 1px;
    opacity: 50%;
}

export component ReferenceFrequency inherits Rectangle {
    height: 160px;
    width: 275px;
    padding: 10px;

    HorizontalLayout {
        alignment: space-around;
        height: 120px;
        GridLayout {
            spacing: 10px;
            Row {
                Text {
                    colspan: 2;
                    text: "Reference Tone";
                    horizontal-alignment: center;
                    font-size: Theme.heading-size;
                    font-weight: Theme.text-weight-bold;
                    color: Theme.text-color;
                }
            }

            Row {
                Rectangle {
                    colspan: 2;
                    background: Theme.text-color;
                    height: 2px;
                }
            }

            Row {
                Text {
                    text: "Frequency:";
                    font-size: Theme.label-size;
                    font-weight: 900;
                    color: Theme.text-color;
                }

                Text {
                    text: "1000 Hz (1kHz)";
                    font-size: Theme.label-size;
                    color: Theme.text-color;
                }
            }

            Row {
                Text {
                    text: "Output Level:";
                    font-size: Theme.label-size;
                    font-weight: 900;
                    color: Theme.text-color;
                }

                Text {
                    text: "-12 dbfs";
                    font-size: Theme.label-size;
                    color: Theme.text-color;
                }
            }

            Row {
                Rectangle {
                    colspan: 2;
                    background: Theme.text-color;
                    height: 2px;
                }
            }

            Row {
                Rectangle {
                    colspan: 2;
                    height: 10px;
                }
            }
        }
    }
}

export component StartButton inherits Rectangle {

    property <bool> active: true;

    states [
        running when active: {
            start_button.text: "Start";
            start_button.primary: false;
        }
        stopped when !active: {
            start_button.text: "Stop";
            start_button.primary: true;
        }
    ]

    HorizontalLayout {
        alignment: space-around;
        start_button := Button {
            width: 100px;
            text: "Start";
            clicked => {
                active = !active;
            }
        }
    }
}
